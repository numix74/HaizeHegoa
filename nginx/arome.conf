# Configuration Nginx pour AROME
# À ajouter dans le bloc server de la configuration nginx principale

# Frontend AROME - Utilise le même frontend que GFS mais avec les données AROME
# Pas besoin de dupliquer le frontend, les données sont chargées dynamiquement

# Données statiques AROME (PNG, MVT)
location ~ ^/v2/data/7/arome/(.*)$ {
    alias /mnt/soaringmeteo-data/arome/output/$1;
    expires 1h;
    add_header Cache-Control "public, max-age=3600";
}

# Pas de cache pour forecast.json d'AROME
location ~ ^/v2/data/7/arome/forecast.json$ {
    alias /mnt/soaringmeteo-data/arome/output/forecast.json;
    expires -1;
    add_header Cache-Control "no-store, no-cache, must-revalidate";
    add_header Pragma "no-cache";
}

# Alternative: Pattern plus spécifique pour les fichiers de cartes
location ~ ^/v2/data/7/arome/([^/]+)/([^/]+)/maps/(.*)$ {
    alias /mnt/soaringmeteo-data/arome/output/$1/$2/maps/$3;
    expires 1h;
    add_header Cache-Control "public, max-age=3600";
}
